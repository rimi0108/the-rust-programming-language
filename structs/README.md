# 연관된 데이터들을 구조체로 다루기

구조체(struct)는 사용자들이 연관된 여러 값들을 묶어서 의미있는 데이터 단위를 정의할 수 있게 한다. 객체 지향 언어를 사용해 본적이 있다면, 구조체(struct)는 객체의 데이터 속성 같은 것으로 보면 된다. 이번 장에서는 튜플과 구조체를 비교해 보고, 구조체를 어떻게 사용하는지 알아보며, 메소드와 구조체 데이터의 동작과 관련된 연관함수(associated functions)의 정의 방법에 대해 알아보도록 하겠다. 구조체와 열거형에 대한 개념은 프로그램 도메인 상에서 새로운 타입을 만들기 위한 기초 재료로서, 러스트의 컴파일 시점 타입 검사 기능을 최대한 활용한다.

## 구조체를 정의하고 초기화하기

구조체는 튜플과 비슷하다. 튜플과 유사하게, 구조체의 구성요소들은 각자 다른 타입을 지닐 수 있다. 그러나 튜플과는 다르게 각 구성요소들은 명명할 수 있어 값이 의미하는 바를 명확하게 인지할 수 있다. 구조체는 각 구성요소들에 명명을 할 수 있다는 점 덕분에 튜플보다 유연하게 다룰 수 있다. 구조체의 특정 요소 데이터 명세를 기술하거나, 접근할 때 순서에 의존할 필요가 없기 때문이다.

구조체를 정의할 때는 `struct` 키워드를 먼저 입력하고 명명할 구조체명을 입력하면 된다. 구조체의 이름은 함께 묶이게 되는 구성요소들의 의미를 내포할 수 있도록 짓는 것이 좋다. 이후 중괄호 안에서는, 필드(field)라고 불리는 각 구성 요소들의 타입과 접근할 수 있는 이름을 정의한다.

<main.rs 코드 참조>

정의한 구조체를 사용하려면, 각 필드의 값을 명세한 인스턴스(instance)를 생성해야 한다. 인스턴스는 구조체의 이름을 명시함으로써 사용할 수 있고, 필드를 식별할 수 있는 이름인 키와 그 키에 저장하고자 하는 값의 쌍(`key:value`)을 이어지는 중괄호 안에 추가하여 생성할 수 있다.

구조체를 정의할 때 필드들의 순서가 정의한 필드의 순서와 같을 필요는 없다. 달리 서술하자면, 구조체 정의는 무엇이 들어가야 하는 지 대략적으로 정의된 양식 정도라고 생각하면 되고, 인스턴스는 그것에 특정한 값을 넣어 실체화한 것이라 생각하면 된다.

<main.rs 코드 참조>

구조체에서 특정한 값을 읽어오려면, 점(.) 표기법을 사용하면 된다. 사용자의 이메일 값을 얻고자 하면, `user1.email` 과 같은 방식으로 접근하면 된다. 변경이 가능한 구조체 인스턴스에 들어있는 값을 바꾸고자 할 때는, 점(.) 표기법을 사용하여 특정 필드에 새 값을 할당할 수 있다.

<main.rs 코드 참조>

인스턴스는 반드시 `변경 가능(mutable)` 해야 한다. Rust에서는 특정 필드만 변경할 수 있도록 허용하지 않는다. 다른 표현식과 마찬가지로, 함수 본문의 마지막에 새 인스턴스 구조체를 표현식(expressions)로 생성하여 새 인스턴스를 바로 반환 할 수 있다.

참조 코드에서는 주어진 `email`과 `user_name`으로 `User` 인스턴스를 반환하는 `build_user` 함수를 보여준다. 활성 필드는 `true` 값을 가져오고 `sign_in_count`는 `1` 값을 가져온다.